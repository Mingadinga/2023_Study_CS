# 로드 밸런서

주요 기능

- 부하 분산 : 웹 서버들로 들어오는 inbound 트래픽을 대신 받아 웹 서버에 부하를 분산하는 기능. 기본은 라운드 로빈 방식.
- 헬스 체크 : 로드 밸런서가 관리하는 웹 서버의 CPU 사용률이나 네트워크 사용량, RAM 상태를 수집한다. 부하가 적은 서버로 트래픽을 보내거나, 응답하지 않는 서버를 인식하고 오토 스케일링을 수행하도록 활용할 수 있다.

# L4, L7 로드 밸런싱

L4 로드 밸런싱

- IP, port를 이용한다.
- Port 구분이 가능하므로 프로토콜(HTTP, FTP)마다 다른 서버로 보내도록 설정할 수 있다.

L7 로드 밸런싱 (프록시)

- IP port 뿐만 아니라 HTTP Request 요청 내용을 포함하여 판단하므로 유연하게 네트워크 밸런싱을 할 수 있다.
- AWS의 ALB에는 보안 그룹을 붙일 수 있다.
- L4에 비해 분석해야할 정보가 많아 로드밸런싱 작업이 어렵고 무겁다.

# 가용성

로드 밸런서를 한대만 두면 SPOF가 될 가능성이 높다. 그래서 보통은 로드 밸런서를 이중화한다. 한대는 Active, 다른 한대는 Standby로 둔다. 평소에는 Active LB로 로드 밸런싱을 수행하다가, Active LB에 장애가 생겨 동작하지 않으면 StandBy가 빠르게 Active 대신 로드 밸런싱을 수행한다. 장애가 복구되면 다시 Active가 수행한다.