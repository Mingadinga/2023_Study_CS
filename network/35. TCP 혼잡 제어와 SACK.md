혼잡이란?

- 네트워크에 너무 많은 패킷이 다니는 상태
- 너무 많은 소스가 데이터를 빨리 전송해서 네트워크 처리가 이 속도를 따라가지 못한다.
- Loss, Out of Order로 인한 중복 패킷 재전송 등의 문제가 발생한다.

Out of Order와 Loss

- 수신 측에서 Out of Order가 발생했을 때, 일정 시간 wait가 필요하다. 실제 Loss가 발생한 것인지 네트워크 상황으로 인해 일부 패킷이 먼저 도착한 것인지 판단할 시간이 필요하기 때문!
- 수신 측이 Loss가 발생했다고 판단하면 해당 패킷 넘버로 ACK를 보낸다. 그러면 송신 측은 해당 패킷부터 지금까지 보낸 패킷을 다시 보낸다. 수신 측 입장에서 중복된 패킷이 재전송되었다. 이러한 패킷들이 많아지면 네트워크 안에 패킷이 많아지는 현상이 발생한다.

호스트의 전송 속도 제어

- 혼잡 상황이 발생하면, 호스트들의 전송 속도를 제한해서 전송되는 패킷 수를 줄인다.
- 단계 : 느린 시작 → 혼잡 회피를 위해 전송량 선형 증가 → 혼잡 감지 시 절반으로 줄임 → 다시 선형 증가
- 전송량 줄이는 방법 : reno, taho 등

SACK (Selective ACK)

- TCP 장애에서 대부분 가장 좋은 대응 방식
- 3 way handshake에서 공유하는 정책에 포함된다.
- 수신 측은 `Loss가 발생한 패킷에 대해서만` ACK를 보낸다. 송신 측은 `해당 패킷에 대해서만 재전송`한다. 중복된 패킷 전송을 피할 수 있다. 이때 ACK는 Segment number로 가는게 아니라 패킷의 범위를 보낸다.
- 다만 서버는 패킷을 보내고 난 후 버퍼에서 바로 지우면 안된다. 다시 보내줘야 할 수도 있기 때문이다. 수신 측이 잘 받았다고 확인이 되고 나면 그때 지운다.