# 패킷 단편화

- 보통 라우터의 MTU는 1500인데, 일부 라우터의 MTU가 1500보다 작은 경우가 있다.
- MTU가 작은 라우터 때문에 패킷을 두개로 분할해서 작은 MTU를 가진 라우터가 받을 수 있도로 한다. 분할된 패킷은 패킷을 수신한 서버 측에서 처리한다.
- 패킷 단편화는 PPS를 떨어뜨리므로 가급적 발생하지 않도록 하는 것이 중요하다.
- MTU가 작은 라우터가 경로에 껴있다는 것을 안다면, 패킷 사이즈를 작은 MTU에 맞춰 하향평준화해서 단편화가 일어나지 않도록 한다.
- 요즘은 라우터 MTU가 작아서 단편화가 일어나는 경우는 거의 없는데, VPN을 사용하는 경우 단편화가 일어나기도 한다.

# IP 패킷 헤더의 관련 필드

![image](https://github.com/Mingadinga/2023_Study_CS/assets/53958188/976354f9-44c2-4136-85a0-1614ba41c729)

- MTU : max transmission unit, 1500
- MSS : max segment size, 1500-20(IP 헤더)-20(TCP 헤더) = 1460
- Identification : 분할된 데이터가 원래는 같은 패킷임을 나타내기 위한 식별자
- Fragment Offset : 분할된 데이터의 바이트 범위